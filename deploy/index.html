<!DOCTYPE html>
<html>
        <head>
            <script src="maplibre-gl.js"></script>
            <link href="maplibre-gl.css" rel="stylesheet" />
            <script src="pmtiles.js"></script>
            <style>
            #map {
                    width: 1400px;
                    height: 800px;
            }
            </style>
        </head>

        <body>

<div id="map"></div>

<script>
    const protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.tile);

    fetch('Circled_dot.svg')
    .then(response => response.text())
    .then(svgText => {
      // Convert SVG text to an image object
      const svg = new Blob([svgText], {type: 'image/svg+xml'});
      const url = URL.createObjectURL(svg);
      const img = new Image();
      img.onload = function() {
        map.addImage('tree-circle', img);
        URL.revokeObjectURL(url);
      };
      img.src = url;
    });
    fetch('Circled_dot_gray.svg')
    .then(response => response.text())
    .then(svgText => {
      // Convert SVG text to an image object
      const svg = new Blob([svgText], {type: 'image/svg+xml'});
      const url = URL.createObjectURL(svg);
      const img = new Image();
      img.onload = function() {
        map.addImage('tree-circle-gray', img);
        URL.revokeObjectURL(url);
      };
      img.src = url;
    });
    
    var map = new maplibregl.Map({
        container: 'map', // container id
        style: 'style.json', // style URL
        center: [9.933333, 49.783333], // starting position [lng, lat]
        zoom: 11, // starting zoom
        maxBounds: [
		[9.093, 49.497],
		[10.905, 50.556],
	]
    });
    map.on('click', 'Tree symbols if named', function(e) {
        // e.features contains all features at the click location
        if (e.features.length > 0) {
            const feature = e.features[0];
            // Build HTML for popup from feature properties
            let html = '<h3>' + (feature.properties['name'] || 'Tree') + '</h3>';
            html += '<ul>';
            for (const key in feature.properties) {
                html += `<li><b>${key}</b>: ${feature.properties[key]}</li>`;
            }
            html += '</ul>';
            // Show popup at clicked location
            new maplibregl.Popup()
                .setLngLat(e.lngLat)
                .setHTML(html)
                .addTo(map);
        }
    });
    map.on('mouseenter', 'Tree symbols if named', function() {
        map.getCanvas().style.cursor = 'pointer';
    });
    map.on('mouseleave', 'Tree symbols if named', function() {
        map.getCanvas().style.cursor = '';
    });
</script>

        </body>
</html>
